fn encode(x: *u32, y: *u32) u32 {
    // x.* = (x.* | x.* << 16) & 0x0000FFFF;
    x.* = (x.* | x.* << 8) & 0x00FF00FF;
    x.* = (x.* | x.* << 4) & 0x0F0F0F0F;
    x.* = (x.* | x.* << 2) & 0x33333333;
    x.* = (x.* | x.* << 1) & 0x55555555;

    // y.* = (y.* | y.* << 16) & 0x0000FFFF;
    y.* = (y.* | y.* << 8) & 0x00FF00FF;
    y.* = (y.* | y.* << 4) & 0x0F0F0F0F;
    y.* = (y.* | y.* << 2) & 0x33333333;
    y.* = (y.* | y.* << 1) & 0x55555555;

    return x.* | (y.* << 1);
}

fn decode(morton: *u32, x: *u32, y: *u32) void {
    x.* = morton.* & 0x55555555;
    x.* = (x.* ^ (x.* >> 1)) & 0x33333333;
    x.* = (x.* ^ (x.* >> 2)) & 0x0F0F0F0F;
    x.* = (x.* ^ (x.* >> 4)) & 0x00FF00FF;
    x.* = (x.* ^ (x.* >> 8)) & 0x0000FFFF;

    y.* = (morton.* >> 1) & 0x55555555;
    y.* = (y.* ^ (y.* >> 1)) & 0x33333333;
    y.* = (y.* ^ (y.* >> 2)) & 0x0F0F0F0F;
    y.* = (y.* ^ (y.* >> 4)) & 0x00FF00FF;
    y.* = (y.* ^ (y.* >> 8)) & 0x0000FFFF;
}
